---
title: 'Configuring PostCSS'
order: 3
---

## Introduction

The Mozaic CSS source files are written in SCSS. But we compile them trough Postcss.
This allow us to combine a SCSS syntax with the power of Postcss Plugins.

Mozaic provide you with an array of PostCSS plugins that you are **required to use to build Mozaic files**, but no task runner, or compiler comes with it.
That way, you are free to use your favorite one, like gulp, grunt, webpack or even npm scripts.

The Mozaic postCSS plugins contains :

- **stylelint:** a powerfull linter for preprocessor languages
- **nodeSass:** compile SCSS into css
- **autoprefixer:** automatically add browser prefixes
- **postcss-base64:** url encode svg in css
- **cssnano:** optimize and minify the CSS code

> Some features may not work without our plugins list and are mandatory. We highly recommend you to use our plugins list for the css to work.

### A) Using a configuration file :

You can create a `postcss.config.js` file in your project root directory and paste the following code inside :

```js
const pluginList = require('@mozaic-ds/css-dev-tools/postcssPluginConfig')
const scssSyntax = require('postcss-scss')

module.exports = {
  syntax: scssSyntax,
  plugins: pluginList,
}
```

### B) with webpack

```js
/*... your imports */
const pluginList = require('@mozaic-ds/css-dev-tools/postcssPluginConfig')
const scssSyntax = require('postcss-scss')

/*... your webpack config */
...
{
  test: /\.scss$/,
  use: [
    'style-loader',
    'css-loader',
    {
      loader: 'postcss-loader',
      options: {
        syntax: scssSyntax,
        plugins: pluginList
      }
    }
  ]
}
...
```

### C) with gulp

```js
var postcss = require('gulp-postcss')
var gulp = require('gulp')
const pluginList = require('@mozaic-ds/css-dev-tools/postcssPluginConfig')

gulp.task('css', () =>
  gulp
    .src('./src/*.scss')
    .pipe(postcss(pluginList))
    .pipe(gulp.dest('./dest'))
)
```

### D) With Vue.js using vue CLI

You will need to use **PostCSS** via `postcss-loader`.

```npm
npm install -D postcss-loader
```

After installing `postcss-loader`, configure the file `vue.config.js` this way:

```js
const pluginList = require('@mozaic-ds/css-dev-tools/postcssPluginConfig')
const scssSyntax = require('postcss-scss')

module.exports = {
  chainWebpack: config => {
    // remove the old loader
    config.module.rules.delete('css')

    // define the new one with mozaic config
    config.module
      .rule('css')
      .test(/\.scss$/)
      .use('vue-style-loader')
      .loader('postcss-loader')
      .tap(() => ({
          syntax: scssSyntax,
          plugins: pluginList,
        })
      })
  },
}
```

### E) With angular CLI

Using angular CLI, you need to override the webpack configuration.  
Install `@angular-builders/custom-webpack` :

`npm i -D @angular-builders/custom-webpack`

Now we need to change the builder option in the angular.json fields to the following:

```json
{
  "architect": {
    "build": {
      "builder": "@angular-builders/custom-webpack:browser",
      "options": {
        "customWebpackConfig": {
          "path": "./webpack.config.js"
        }
      }
    },
    "serve": {
      "builder": "@angular-builders/custom-webpack:dev-server",
      "options": {
        "customWebpackConfig": {
          "path": "./webpack.config.js"
        }
      }
    }
  }
}
```

You must create a new `webpack.config.js` file in the root directory :

```js
const pluginList = require('@mozaic-ds/css-dev-tools/postcssPluginConfig')
const scssSyntax = require('postcss-scss')

module.exports = {
  module: {
    rules: [
      {
        test: /\.scss$/,
        loader: 'postcss-loader',
        options: {
          ident: 'postcss',
          syntax: scssSyntax,
          plugins: pluginList,
        },
      },
    ],
  },
}
```

## Compiling for production

To compile for production, you need to set a environment variable.
Mozaic will deliver to you a postCSS plugin list with production features like minification and will disable development features like Stylelint.

```shell
MOZAIC_ENV=production
```

## Sass and PostCSS configuration options

Read our [configuration and customization guide](/GetStarted/Developers/Configuration/).
